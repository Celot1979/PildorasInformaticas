from tkinter import *
import parser

#Root
root =Tk()
root.title("Calculadora Propia")
root.iconbitmap("calculadora.ico")
t = StringVar()
display = Entry(root,justify= RIGHT, textvariable=t)
display.grid(row=1, columnspan=6)

#Funcions

def clear_display():
    display.delete(0,END)
    
    
    
i = 0
def clic_boton(n):
    
    global i
    display.insert(i, n)
    i += 1
    


def calcular():
    display_state= display.get()
    try:
        math_expression =parser.expr(display_state).compile()
        result=eval(math_expression)
        clear_display()
        display.insert(0, result)
    except expression as identifier:
        clear_display()
        display.insert(0, "Error")

    expresion = parser.expr(display_state).compile
    result= eval(expresion)
    clear_display()
    display.insert(0, result)
    
#Botones
ButtonAC = Button(root, text="AC", command=clear_display)
ButtonAC.grid(row= 2, column=0)
#------------------------------------------------------------------------ BOTON CONVERTIR ----------------------------------------------------------------------------------------------------------------------------------------

ButtonConver = Button(root, text="+/-", command=lambda:clic_boton("+/-"))
ButtonConver.grid(row= 2, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON TANTO POR CIENTO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonCiento = Button(root, text="%", command=lambda:clic_boton("%"))
ButtonCiento.grid(row= 2, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON DIVIDIR ----------------------------------------------------------------------------------------------------------------------------------------

ButtonDividir = Button(root, text="/", bg="#FF0000", command=lambda:clic_boton("/"))
ButtonDividir.grid(row= 2, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------




#------------------------------------------------------------------------ BOTON SIETE ----------------------------------------------------------------------------------------------------------------------------------------

Buttonsiete = Button(root, text="7", command=lambda:clic_boton("7"))
Buttonsiete.grid(row= 3, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON OCHO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonOcho = Button(root, text="8",command=lambda:clic_boton("8"))
ButtonOcho.grid(row= 3, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON 9 ----------------------------------------------------------------------------------------------------------------------------------------

ButtonNueve = Button(root, text="9", command=lambda:clic_boton("9"))
ButtonNueve.grid(row= 3, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON MULTIPLICAR ----------------------------------------------------------------------------------------------------------------------------------------

ButtonMult = Button(root, text="*", bg="#FF0000", command=lambda:clic_boton("*"))
ButtonMult.grid(row= 3, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CUATRO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonsCuatro = Button(root, text="4", command=lambda:clic_boton("4"))
ButtonsCuatro.grid(row= 4, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CINCO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonCinco = Button(root, text="5", command=lambda:clic_boton("5"))
ButtonCinco.grid(row= 4, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON SEIS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonSeis = Button(root, text="6", command=lambda:clic_boton("6"))
ButtonSeis.grid(row= 4, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON MENOS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonMenos= Button(root, text="-", bg="#FF0000", command=lambda:clic_boton("-"))
ButtonMenos.grid(row= 4, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON UNO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonUno = Button(root, text="1", command=lambda:clic_boton("1"))
ButtonUno.grid(row= 5, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON DOS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonDos = Button(root, text="2", command=lambda:clic_boton("2"))
ButtonDos.grid(row= 5, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON TRES ----------------------------------------------------------------------------------------------------------------------------------------

ButtonTres = Button(root, text="3", command=lambda:clic_boton("3"))
ButtonTres.grid(row= 5, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON MAS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonMas= Button(root, text="+", bg="#FF0000", command=lambda:clic_boton("+"))
ButtonMas.grid(row= 5, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CERO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonCero = Button(root, text="0",width=8, command=lambda:clic_boton("0"))
ButtonCero.grid(row=6, columnspan=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON COMA ----------------------------------------------------------------------------------------------------------------------------------------

Buttoncoma = Button(root, text=",", command=lambda:clic_boton(","))
Buttoncoma.grid(row= 6, column=2)
#------------------------------------------------------------------------ BOTON IGUAL ----------------------------------------------------------------------------------------------------------------------------------------

ButtonIgual = Button(root, text="=", command=lambda:calcular())
ButtonIgual.grid(row= 6, column=3)








root.mainloop()