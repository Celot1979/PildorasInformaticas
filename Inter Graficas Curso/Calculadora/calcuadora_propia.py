from tkinter import *
import parser
root =Tk()
root.title("Calculadora Propia")
root.iconbitmap("calculadora.ico")


""" 1º Debemos crear un ENTRY donde podamos alojar los números para luego almacenarlos
en una variable """
#------------------------------------------------------------------------ CAJA CONTENEDORA(ENTRY) ----------------------------------------------------------------------------------------------------------------------------------------

CajaContenedora = Entry(root, justify=RIGHT)
#Hemos configurado que al escribir los números se empiecen a escribir por la
#derecha de la caja.
CajaContenedora.grid(row=0, columnspan=8)
i = 0
def click_boton(valor):
    global i
    CajaContenedora.insert(i, valor) 
    i+=1
    
    """ La función está creada para que el valor escrito en el botón pase directamente al entry (sin intvar()) """
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


""" 2º Vamos a crear los botones de la calculadora """

#------------------------------------------------------------------------ BOTON BORRAR ----------------------------------------------------------------------------------------------------------------------------------------
def borrar():
    CajaContenedora .delete(0,END)
ButtonAC = Button(root, text="AC", command=borrar)
ButtonAC.grid(row= 2, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CONVERTIR ----------------------------------------------------------------------------------------------------------------------------------------

ButtonConver = Button(root, text="+/-", command=lambda:click_boton("+/-"))
ButtonConver.grid(row= 2, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON TANTO POR CIENTO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonCiento = Button(root, text="%", command=lambda:click_boton("%"))
ButtonCiento.grid(row= 2, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON DIVIDIR ----------------------------------------------------------------------------------------------------------------------------------------

ButtonDividir = Button(root, text="/", bg="#FF0000", command=lambda:click_boton("/"))
ButtonDividir.grid(row= 2, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------




#------------------------------------------------------------------------ BOTON SIETE ----------------------------------------------------------------------------------------------------------------------------------------

Buttonsiete = Button(root, text="7", command=lambda:click_boton("7"))
Buttonsiete.grid(row= 3, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON OCHO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonOcho = Button(root, text="8",command=lambda:click_boton("8"))
ButtonOcho.grid(row= 3, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON 9 ----------------------------------------------------------------------------------------------------------------------------------------

ButtonNueve = Button(root, text="9", command=lambda:click_boton("9"))
ButtonNueve.grid(row= 3, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON MULTIPLICAR ----------------------------------------------------------------------------------------------------------------------------------------

ButtonMult = Button(root, text="*", bg="#FF0000", command=lambda:click_boton("*"))
ButtonMult.grid(row= 3, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CUATRO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonsCuatro = Button(root, text="4", command=lambda:click_boton("4"))
ButtonsCuatro.grid(row= 4, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CINCO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonCinco = Button(root, text="5", command=lambda:click_boton("5"))
ButtonCinco.grid(row= 4, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON SEIS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonSeis = Button(root, text="6", command=lambda:click_boton("6"))
ButtonSeis.grid(row= 4, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON MENOS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonMenos= Button(root, text="-", bg="#FF0000", command=lambda:click_boton("-"))
ButtonMenos.grid(row= 4, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON UNO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonUno = Button(root, text="1", command=lambda:click_boton("1"))
ButtonUno.grid(row= 5, column=0)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON DOS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonDos = Button(root, text="2", command=lambda:click_boton("2"))
ButtonDos.grid(row= 5, column=1)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON TRES ----------------------------------------------------------------------------------------------------------------------------------------

ButtonTres = Button(root, text="3", command=lambda:click_boton("3"))
ButtonTres.grid(row= 5, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON MAS ----------------------------------------------------------------------------------------------------------------------------------------

ButtonMas= Button(root, text="+", bg="#FF0000", command=lambda:click_boton("+"))
ButtonMas.grid(row= 5, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON CERO ----------------------------------------------------------------------------------------------------------------------------------------

ButtonCero = Button(root, text="0",width=8, command=lambda:click_boton("0"))
ButtonCero.grid(row=6, columnspan=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON COMA ----------------------------------------------------------------------------------------------------------------------------------------

Buttoncoma = Button(root, text=",", command=lambda:click_boton(","))
Buttoncoma.grid(row= 6, column=2)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



#------------------------------------------------------------------------ BOTON IGUAL ----------------------------------------------------------------------------------------------------------------------------------------
def calcular():

    valor= CajaContenedora.get()
    try:
        expresion = parser.expr(valor).compile
        resultado = eval(expresion)
        CajaContenedora.delete("0", END)
        CajaContenedora("0", resultado)

    except:
         CajaContenedora.delete("0", END)
         CajaContenedora.insert("0", "Error")

    """valor = CajaContenedora.get()
    try:
        expresion = parser.expr(valor).compile()
        resultado = eval(expresion)
        CajaContenedora.delete(0, END)
        CajaContenedora.insert(0, resultado)
        
       
        
    except:
        borrar()
        CajaContenedora.insert(0, "Error")"""



ButtonIgual = Button(root, text="=", command=lambda:calcular)
ButtonIgual.grid(row= 6, column=3)
#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------




#------------------------------------------------------------------------ FINAL DEL LOOP ----------------------------------------------------------------------------------------------------------------------------------------

root.mainloop()
